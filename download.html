<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <!-- 引入YDUI样式 -->
    <link rel="stylesheet" href="./lib/ydui-0.1.3/build/css/ydui.css" />
    <link rel="stylesheet" href="./styles/reset.css"/>
    <link rel="stylesheet" href="./styles/main.css" />
    <link rel="stylesheet" href="./styles/font/iconfont.css">
    <!-- 引入YDUI自适应解决方案类库 -->
    <script src="./lib/ydui-0.1.3/build/js/ydui.flexible.js"></script>
    <script src="./lib/jquery.min.js"></script>
  </head>
  <body>
    <div class="page page-download">
      <header class="m-navbar">
        <a class="navbar-item" href="#">
          <i class="back-ico"></i>
        </a>
        <div class="navbar-center">
          <span class="navbar-title">我的下载</span>
        </div>
        <a class="navbar-item" href="#" id="del-action-btn">
          <i class="iconfont ic-del"></i>
        </a>
      </header>

      <div class="list-wrapper">
        <div class="list-item">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-ucheck"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
        <div class="list-item" data-val="a">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-check"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
        <div class="list-item" data-val="b">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-check"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
        <div class="list-item">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-ucheck"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
        <div class="list-item" data-val="c">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-check"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
        <div class="list-item" data-val="d">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-check"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
        <div class="list-item">
          <div class="box-wrapper">
            <div class="btn-wrapper">
              <span>已下载</span>
              <i class="iconfont ic-ucheck"></i>
            </div>
            <img src="images/action.png" alt="action">
          </div>
          <p class="action-name">简易脊椎活动</p>
          <p class="action-info iconfont ic-time">15分钟</p>
        </div>
      </div>

      <div class="del-btn">
        删除
      </div>
    </div>
    <!-- 引入jQuery 2.0+ -->
    <script src="lib/zepto.min.js"></script>
    <!-- 引入YDUI脚本 -->
    <script src="lib/ydui-0.1.3/build/js/ydui.js"></script>
    <script>
      const $delActionBtn = $('#del-action-btn')
      const $listWrapper = $('.list-wrapper')
      const $deleteBtn = $('.del-btn')

      $delActionBtn.on('click', function(evt) {
        evt.preventDefault()
        if($listWrapper.hasClass('isEditMode')) {
          $listWrapper.removeClass('isEditMode')
          $deleteBtn.css('display', 'none')
        } else {
          $listWrapper.addClass('isEditMode')
          $deleteBtn.css('display', 'block')
        }
      })

      $('body')
        .on('click', '.isEditMode .list-item', function(evt) {
          evt.preventDefault()
          const $checker = $($(this).find('i')[0])
          if ($checker.hasClass('ic-check')) {
            $checker.removeClass('ic-check').addClass('ic-ucheck')
          } else {
            $checker.removeClass('ic-ucheck').addClass('ic-check')
          }
        })
        .on('click', '.del-btn', function (evt) {
          evt.preventDefault()
          const items = $listWrapper
            .find('.list-item .box-wrapper .btn-wrapper .ic-check')
            .parents('.list-item')
            
            for(let i = 0; i < items.length; i++) {
              const itm = $(items[i])
              console.log(itm.attr('data-val'))
            }
        })
    </script>
  </body>
</html>

